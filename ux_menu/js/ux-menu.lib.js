!function(e,n,t){"use strict";function i(n,t){this.element=n,this._name=r,this._defaults=e.fn.uxMenu.defaults,this.options=e.extend({},this._defaults,t),this.animationEvent=a(),this.init()}function a(){var e,n=t.createElement("fakeelement"),i={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"};for(e in i)if("undefined"!==n.style[e])return i[e]}var r="uxMenu";e.extend(i.prototype,{init:function(){this.buildCache(),this.buildElement(),this.bindEvents()},destroy:function(){this.unbindEvents(),this.$element.removeData()},buildCache:function(){this.$element=e(this.element),this.$menu=this.$element.find("."+r+"-menu"),this.$wrap=this.$menu.find("."+r+"-wrap"),this.$menus=this.$menu.find("."+r+"-level"),this.menusArr=[],this.breadCrumbs=!1,(this.options.breadcrumbNav||this.options.backNav)&&(this.$breadcrumbWrapper=this.$element.find("."+r+"-top")),this.options.backNav&&(this.$backWrapper=this.$element.find("."+r+"-top"));var n=0;this.$menus.each(function(t){e(this).find("."+r+"-link.is-active").length&&(n=t)}),this.current_menu=n},buildElement:function(){var n=this,t=[],i=null;if(this.$menus.each(function(i){var a=e(this),s={$menuEl:a,$menuItems:a.find("."+r+"-item")};n.menusArr.push(s),i===n.current_menu&&(a.addClass(r+"-level--current"),n.setWrapHeight(a)),a.find("."+r+"-link[data-submenu]").each(function(){var a=e(this);n.options.itemIcon&&a.append(n.options.itemIcon);var r=a.attr("data-submenu"),s={menu:r,name:a.html()};t[i]?t[i].push(s):(t[i]=[],t[i].push(s))})}),this.$menus.each(function(i){var a=e(this),r=a.attr("data-menu");t.forEach(function(e,t){e.forEach(function(e,a){e.menu===r&&(n.menusArr[i].backIdx=t,n.menusArr[i].name=e.name)})})}),n.options.backNav&&(i=n.fetchSelector(n.options.backSelector))){i.find("."+r+"-back").remove(),n.$backNav=e('<a class="'+r+'-back" aria-label="'+n.options.backText+'" href="#"></a>').prependTo(i);var a=n.options.backText;n.options.backIcon&&(a=n.options.backIcon+" "+a),n.$backNav.html(a),0!==n.current_menu&&n.$backNav.addClass("animate-fadeIn")}n.options.breadcrumbNav&&(i=n.fetchSelector(n.options.breadcrumbSelector))&&(i.find("."+r+"-breadcrumbs").remove(),n.$breadcrumbNav=e('<nav class="'+r+'-breadcrumbs" aria-label="You are here"></nav>').prependTo(i),n.addBreadcrumb(0),0!==n.menusArr[n.current_menu].backIdx&&0!==n.current_menu&&(n.crawlCrumbs(n.menusArr[n.current_menu].backIdx,n.menusArr),n.breadCrumbs=!0),0!==n.current_menu&&(n.addBreadcrumb(n.current_menu),n.breadCrumbs=!0))},fetchSelector:function(n){var t=this.$element.find(n);return t.length||(t=e(n).first()),t.length?t:null},bindEvents:function(){for(var n=this,t=0,i=this.menusArr.length;t<i;++t)this.menusArr[t].$menuItems.each(function(t){e(this).find("."+r+"-link[data-submenu]").on("click",function(i){var a=e(this),s=a.html(),o=a.attr("data-submenu"),u=n.$menu.find("."+r+'-level[data-menu="'+o+'"]');u.length?(i.preventDefault(),n.openSubMenu(u,t,s)):(n.$menu.find("."+r+"-link--current").removeClass(r+"-link--current"),a.addClass(r+"-link--current"))})});this.options.backNav&&this.$backNav.on("click",function(e){e.preventDefault(),n.back()})},addBreadcrumb:function(n){if(!this.options.breadcrumbNav)return!1;var t=this,i=n?this.menusArr[n].name.replace(/<([^>]+?)([^>]*?)>(.*?)<\/\1>/gi,""):this.options.breadcrumbText,a=e('<span class="uxMenu-breadcrumb">');!n&&t.options.breadcrumbIcon&&(i=t.options.breadcrumbIcon+i),n&&t.options.breadcrumbSeparatorIcon&&a.html(t.options.breadcrumbSeparatorIcon),e('<a href="#"></a>').html(i).appendTo(a).on("click",function(e){if(e.preventDefault(),!a.next().length||t.isAnimating)return!1;t.isAnimating=!0,t.menuOut();var i=t.menusArr[n].$menuEl;t.menuIn(i);var r=a.nextAll();r.one(t.animationEvent,function(e){r.remove()}).addClass("animate-fadeOut")}),this.$breadcrumbNav.append(a),a.addClass("animate-fadeIn")},crawlCrumbs:function(e,n){this.log("Crawl Crumbs"),0!==n[e].backIdx&&this.crawlCrumbs(n[e].backIdx,n),this.addBreadcrumb(e)},openSubMenu:function(e,n,t){if(this.isAnimating)return!1;var i=this.$menus.index(e);this.isAnimating=!0,this.menusArr[i].backIdx=this.current_menu,this.menusArr[i].name=t,this.menuOut(n),this.menuIn(e,n)},back:function(){if(this.isAnimating)return!1;this.isAnimating=!0,this.menuOut();var e=this.menusArr[this.menusArr[this.current_menu].backIdx].$menuEl;this.menuIn(e),this.options.breadcrumbNav&&this.$breadcrumbNav.children().last().remove()},menuOut:function(e){var n=this,t=this.menusArr[this.current_menu].$menuEl,i=void 0===e;this.menusArr[this.current_menu].$menuItems.each(function(t){this.style.WebkitAnimationDelay=this.style.animationDelay=i?parseInt(t*n.options.itemDelayInterval)+"ms":parseInt(Math.abs(e-t)*n.options.itemDelayInterval)+"ms"}),"r2l"===this.options.direction?t.addClass(i?"animate-outToRight":"animate-outToLeft"):t.addClass(i?"animate-outToLeft":"animate-outToRight")},setWrapHeight:function(n){var t=this;n=n||this.$menus.filter("."+r+"-level--current");var i=this.$wrap.height(),a=0;n.children().each(function(){a+=e(this).outerHeight()}),t.$element.offsetParent().animate({scrollTop:0},1e3),i<=a?this.$wrap.height(a):n.one(this.animationEvent,function(e){t.$wrap.height(a)})},menuIn:function(n,t){var i=this,a=this.menusArr[this.current_menu].$menuEl,s=void 0===t,o=this.$menus.index(n),u=this.menusArr[o],m=u.$menuItems,c=m.length;i.setWrapHeight(n),s?0===o&&i.options.backNav&&i.$backNav.removeClass("animate-fadeIn").addClass("animate-fadeOut"):(i.options.backNav&&i.$backNav.removeClass("animate-fadeOut").addClass("animate-fadeIn"),i.addBreadcrumb(o)),m.each(function(u){this.style.WebkitAnimationDelay=this.style.animationDelay=s?parseInt(u*i.options.itemDelayInterval)+"ms":parseInt(Math.abs(t-u)*i.options.itemDelayInterval)+"ms",u===(t<=c/2||s?c-1:0)&&e(this).one(i.animationEvent,function(e){"r2l"===i.options.direction?(a.removeClass(s?"animate-outToRight":"animate-outToLeft"),n.removeClass(s?"animate-inFromLeft":"animate-inFromRight")):(a.removeClass(s?"animate-outToLeft":"animate-outToRight"),n.removeClass(s?"animate-inFromRight":"animate-inFromLeft")),a.removeClass(r+"-level--current"),n.addClass(r+"-level--current"),i.current_menu=o,i.isAnimating=!1,n.focus()})}),"r2l"===this.options.direction?n.addClass(s?"animate-inFromLeft":"animate-inFromRight"):n.addClass(s?"animate-inFromRight":"animate-inFromLeft")},unbindEvents:function(){this.$element.off("."+this._name)},log:function(e){this.options.debug&&("object"==typeof e?console.log("["+this._name+"]",e):console.log("["+this._name+"] "+e))},error:function(e){"object"==typeof e?console.error("["+this._name+"]",e):console.error("["+this._name+"] "+e)}}),e.fn.uxMenu=function(n){var t=arguments;if("undefined"===n||"object"==typeof n)return this.each(function(){e.data(this,r)||e.data(this,r,new i(this,n))});if("string"==typeof n&&"_"!==n[0]&&"init"!==n){var a;return this.each(function(){var s=e.data(this,r);s instanceof i&&"function"==typeof s[n]&&(a=s[n].apply(s,Array.prototype.slice.call(t,1))),"destroy"===n&&e.data(this,"plugin_"+r,null)}),"undefined"!==a?a:this}},e.fn.uxMenu.defaults={debug:!1,backNav:!1,backText:"Back",backIcon:"",breadcrumbNav:!0,backSelector:"."+r+"-top",breadcrumbText:"All",breadcrumbIcon:"",breadcrumbSeparatorIcon:"",breadcrumbSelector:"."+r+"-top",itemIcon:"",itemDelayInterval:60,direction:"r2l",theme:"",relocateNav:"",onItemClick:null}}(jQuery,window,document);